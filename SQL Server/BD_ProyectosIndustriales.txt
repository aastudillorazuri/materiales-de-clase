USE master
GO

IF DB_ID('PROYECTOSINDUSTRIALES')IS NOT NULL
BEGIN
	DROP DATABASE PROYECTOSINDUSTRIALES
END

CREATE DATABASE PROYECTOSINDUSTRIALES
GO

USE PROYECTOSINDUSTRIALES
GO

SET DATEFORMAT DMY
GO

CREATE TABLE CLIENTE(
	IDE_CLI CHAR(5) NOT NULL,
	NOM_CLI VARCHAR(50) NOT NULL,
	RUC_CLI CHAR(11) NOT NULL,
	COD_DIS CHAR(3) NOT NULL,
	EMA_CLI VARCHAR(35) NULL
)
GO

CREATE TABLE DISTRITO(
	COD_DIS CHAR(3) NOT NULL,
	NOM_DIS VARCHAR(40) NOT NULL
)
GO

CREATE TABLE ENCARGADO(
	IDE_ENC CHAR(5) NOT NULL,
	APE_ENC VARCHAR(30) NOT NULL,
	NOM_ENC VARCHAR(30) NOT NULL,
	CAR_ENC VARCHAR(30) NOT NULL,
	COD_DIS CHAR(3) NOT NULL,
	FIN_ENC DATE NOT NULL
)
GO

CREATE TABLE PROYECTO(
	NUM_PRO INT NOT NULL IDENTITY(1,1),
	FEC_PRO DATE NOT NULL,
	MON_PRO MONEY NOT NULL
)
GO

CREATE TABLE DETALLEPROYECTO(
	NUM_PRO INT NOT NULL,
	IDE_CLI CHAR(5) NOT NULL,
	IDE_ENC CHAR(5) NOT NULL,
	DES_DET VARCHAR(40) NOT NULL
)
GO

ALTER TABLE PROYECTO
	ADD PRIMARY KEY NONCLUSTERED (NUM_PRO)
ALTER TABLE ENCARGADO
	ADD PRIMARY KEY NONCLUSTERED (IDE_ENC)
ALTER TABLE CLIENTE
	ADD PRIMARY KEY NONCLUSTERED (IDE_CLI)
ALTER TABLE DETALLEPROYECTO
	ADD PRIMARY KEY NONCLUSTERED (NUM_PRO,IDE_CLI)
ALTER TABLE DISTRITO
	ADD PRIMARY KEY NONCLUSTERED (COD_DIS)
ALTER TABLE DETALLEPROYECTO
	ADD FOREIGN KEY (IDE_CLI) REFERENCES CLIENTE
ALTER TABLE DETALLEPROYECTO
	ADD FOREIGN KEY(NUM_PRO) REFERENCES PROYECTO
ALTER TABLE DETALLEPROYECTO
	ADD FOREIGN KEY (IDE_ENC) REFERENCES ENCARGADO
ALTER TABLE CLIENTE
	ADD FOREIGN KEY (COD_DIS) REFERENCES DISTRITO
GO























